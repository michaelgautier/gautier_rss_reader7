# =========================================================================
#     This makefile was generated by
#     Bakefile 0.2.11 (http://www.bakefile.org)
#     Do not modify, all changes will be overwritten!
# =========================================================================



# -------------------------------------------------------------------------
# These are configurable options:
# -------------------------------------------------------------------------

#  
AR ?= ar

#  
RANLIB ?= ranlib

# C compiler 
CC = gcc

# C++ compiler 
CXX = g++

# Standard flags for CC 
CFLAGS ?= 

# Standard flags for C++ 
CXXFLAGS ?= 

# Standard preprocessor flags (common for CC and CXX) 
CPPFLAGS ?= 

# Standard linker flags 
LDFLAGS ?= 



# -------------------------------------------------------------------------
# Do not modify the rest of this file!
# -------------------------------------------------------------------------

### Variables: ###

CPPDEPS = -MT$@ -MF`echo $@ | sed -e 's,\.o$$,.d,'` -MD -MP
ARGTABLE_CFLAGS =   -c -std=c17 -O3 $(CPPFLAGS) $(CFLAGS)
ARGTABLE_OBJECTS =  \
	argtable_argtable3.o
NEWSDOWNLD_CXXFLAGS = -std=c++17 -g `xml2-config --cflags` -I../source \
	$(CPPFLAGS) $(CXXFLAGS)
NEWSDOWNLD_OBJECTS =  \
	newsdownld_newsdownld.o \
	newsdownld_db.o \
	newsdownld_feed_download.o \
	newsdownld_reader.o \
	newsdownld_rss_article.o \
	newsdownld_writer.o \
	newsdownld_feed_parse.o

### Conditionally set variables: ###



### Targets: ###

all: bin/libargtable.a bin/newsdownld

install: 

uninstall: 

clean: 
	rm -f ./*.o
	rm -f ./*.d
	rm -f bin/libargtable.a
	rm -f bin/newsdownld

bin: 
	@mkdir -p bin

bin/libargtable.a: $(ARGTABLE_OBJECTS) bin
	rm -f $@
	$(AR) rcu $@ $(ARGTABLE_OBJECTS)
	$(RANLIB) $@

bin/newsdownld: $(NEWSDOWNLD_OBJECTS) bin bin/libargtable.a
	$(CXX) -o $@ $(NEWSDOWNLD_OBJECTS)  -std=c++17 -no-pie argtable_argtable3.o `pkg-config sqlite3 --libs` `pkg-config libcurl --libs` `xml2-config --libs` $(LDFLAGS)

argtable_argtable3.o: ./../source/external/argtable/argtable3.c
	$(CC) -c -o $@ $(ARGTABLE_CFLAGS) $(CPPDEPS) $<

newsdownld_newsdownld.o: ./../source/rss_cli/newsdownld.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_db.o: ./../source/rss_lib/db/impl/db.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_feed_download.o: ./../source/rss_lib/rss_download/impl/feed_download.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_reader.o: ./../source/rss_lib/rss/impl/reader.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_rss_article.o: ./../source/rss_lib/rss/impl/rss_article.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_writer.o: ./../source/rss_lib/rss/impl/writer.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

newsdownld_feed_parse.o: ./../source/rss_lib/rss_parse/impl/feed_parse.cpp
	$(CXX) -c -o $@ $(NEWSDOWNLD_CXXFLAGS) $(CPPDEPS) $<

.PHONY: all install uninstall clean


# Dependencies tracking:
-include ./*.d
